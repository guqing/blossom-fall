### 项目框架搭建
- 导入原型(只有页面但没有功能的一个项目，其中功能都是直接跳转并不会有真的功能)
- 功能分析
>- 添加客户
>
>- 查询所有客户
>
>- 编辑客户（加载这个客户到表单中显示）
>
>- 删除客户
>
>- 多条件组合查询
> 创建表
> 
>创建包：公司名.项目名.分层
```
cstm.domain:Customer,它与表单和t_customer表对应
cstm.dao：CustomerDao
cstm.service:CustomerService,它没有业务，但是必须按照三层来写
cstm.web.servlet:CustomerServlet
```
> 导包
```
mysql驱动
c3p0(两个，一个配置文件)
自己的小工具JdbcUtils,它再itcast-tools里
```
### 功能实现
#### 添加客户
add.jsp-->CustomerServlet#add()-->添加成功

#### 查询客户
top.jsp(查询客户)-->CustomerServlet#findAll()-->list.jsp-->选择beanList查询

### 编辑客户
编辑分为两步：

1. 通过cid查询
- list.jsp（编辑链接）-->CustomerServlet#preEdit()-->edit.jsp(把查询出的结果显示到表单中
- edit.jsp(表单页面)--》CustomerServlet#edit()-->msg.jsp(显示成功信息)

### 删除客户
- list.jsp（删除链接）-->CustomerServlet#delet()-->msg.jsp

### 多条件组合查询
- query.jsp-->CustomerServlet#query()-->list.jsp显示


### 分页
第n页/共M页 首页 上一页 下一页 尾页
- 分页的优点：
```
只查询一页不用查询所有页
```
- 统计分页数据
```
页面的数据都是由servlet来传递的
serlet:
> 当前页:pageCode,pc
    -> 如果页面没有传递当前页码，那么servlet默认是第一页，或者按页面传递的为准
> 总页数：totalPage,tp
    -> tp:总记录数/每页记录数
> 总记录数:toaalRecorded,tr
    -> tr：dao来获取，select count(*) from t_customer
> 每一页记录数：业务数据或叫系统数据
> 当前页数据：beanList
> url:
```
- 数据的传递

这些分页数据总在个各层之间来回传递，我们把这些分页数据封装到JavaBean中，他就叫分页Bean，例如：pageBean

- 分页在各层中的处理
```
页面：给出分页相关的链接
servlet:创建pageBean对象，给pageBean所有的属性赋值，然后传递给页面
    -> 页面需要给servlet传递什么：有可能传递当前页码pc
    -> servlet需要给DAO传递当前页码pc，每页记录数ps
service：略
Dao:
 -> tr:select count(*) from t_customer
 -> beanList:select * from t_customer limit x,y
```
- 显示分页的页码列表
```
一共显示多少个页码，定为10
最多显示多少个页码
当前页在页码中的位置定为6
只需要当前页来定出页码列表
定下来页码列表只需要两样数据(只需要当前页码即可定位出begin和end)
 ->begin
 ->end

需要使用pc推算出begin和end
begin=pc-5
end=pc+4

计算规则：
> 如果总页数小于等于10，那么全部显示出来
> 使用公式计算begin=pc-5,end=pc+4
> 头溢出：当begin<1时让begin=1
> 尾溢出：当end>${tp}时，让end=${tp}

```

- 在超链接中要保留参数
```
当使用多条件查询后，再点击第2页时
这个第2页超链接没有条件了
所以会丢失条件，所以我们需要在页面上的所有链接都要保留条件
> 我们要把条件以一个字符串的形式保存到pageBean的url中，这个任务由servlet来完成
```