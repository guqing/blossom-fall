### 过滤器
它会在一组资源（jsp,Seervlet,css,html等等）的前面执行
它可以让请求的得到目标资源，也可以不让请求达到
- 过滤器由拦截请求的能力

### 过滤器如何编写
1.下一个类实现一个Filter接口
2.在web.xml中进行配置

### Filter接口
- void init(FilterConfig):创建之后马上执行，Filter会在服务器启动时创建
- Void destory():销毁之前执行，服务器关闭时销毁
- void oFilter(ServletRequest arg0, ServletResponse arg1, FilterChain arg2):没每次过滤时都会执行

Filter是单类的
 
### web.xml中进行配置
```xml
<filter>
    <filter-name>xxx</filter-name>
    <filter-class>web.filter.AFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>xxx</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```

### FilterConfig
与ServletCongfig极其相似
- 获取初始化参数：getInitParameter()
- 获取过滤名称：getFilterName()
- 获取applicattion:getSeervletContext()

### FilterChain
- 放行（就相当于调用了目标servlet的是service方法）：doFilter(ServletRequest,ServletResponse)

### 多过滤器
FilterChain#doFilter()方法：
执行目标资源，或是执行下一个过滤器，如果没有下一个过滤器那么执行的是目的资源，如果有，那么执行下一个过滤器

### 过滤器的四种拦截方式
- 拦截请求（Dispatcher）
- 拦截转发（Forword）
- 拦截包含（Include）
- 拦截错误（Error）
默认拦截Request
在<Filter-Mapping>中进行配置
```xml
<filter-mapping>
    <filter-name>BFilter</filter-name>
    <url-pattern>/AServlet</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping>
```

### 多个过滤器的执行顺序
在<filter-mapping>中的配置顺序决定过滤器的执行顺序

### 过滤器的应用场景
#### 1、统一POST请求中文字符编码的过滤器 
- 如何 实现：  
***将每个Servlet共有的代码提取出来。***
例如：几乎是所有的Servlet中都需要写：request.setCharacterEncoding()可以把它放到一个Filter中

#### 2、禁止浏览器缓存所有动态页面的过滤器
- 如何 实现：

```
response.setDateHeader("Expires",-1);
response.setHeader("Cache-Control","no-cache"); 
response.setHeader("Pragma","no-cache"); 
并不是所有的浏览器都能完全支持上面的三个响应头，因此最好是同时
使用上面的三个响应头。
Expires数据头：值为GMT时间值，为-1指浏览器不要缓存页面
Cache-Control响应头有两个常用值： 
no-cache指浏览器不要缓存当前页面。
max-age:xxx指浏览器缓存页面xxx秒。
```
#### 3、控制浏览器缓存页面中的静态资源的过滤器
- 如何 实现：
```
有些动态页面中引用了一些图片或css文件以修饰页面效果，这些图片
和css文件经常是不变化的，
所以为减轻服务器的压力，可以使用filter控制浏览器缓存这些文件，
以提升服务器的性能。
```
#### 4、使用Filter实现URL级别的权限认证
如何 实现：
```
在实际开发中我们经常把一些执行敏感操作的servlet映射到一些特殊
目录中，
并用filter把这些特殊目录保护起来，限制只能拥有相应访问权限的用
户才能访问这些目录下的资源。
从而在我们系统中实现一种URL级别的权限功能。
```